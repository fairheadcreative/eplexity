//rules for plates with cakes, slices, toppings..
.plate { 
	@include clearfix;
	border: 1px solid $base-border-color;
	border-radius: 3px;
	padding: $base-spacing;
	margin: 0 0 $small-spacing;
	position: relative;
  box-shadow: 0 1px 1px rgba(0,0,0,.05);

  .plate-notice {
    padding: 1em;
    text-align: center;
  }

	&.plate-small {
		max-width: 25em;
		margin: 0 auto $small-spacing;
		padding: $base-spacing;

		input {
			margin-bottom: $small-spacing;
		}
	}

	.span-1 { @include span-columns(1); }
	.span-2 { @include span-columns(2); }
	.span-3 { @include span-columns(3); }
	.span-4 { @include span-columns(4); }
	.span-6 { @include span-columns(6); }
	.span-7 { @include span-columns(7); }
	.span-8 { @include span-columns(8); }
	.span-10 { @include span-columns(10); }

	.push-1 { padding-left: $base-spacing; }
	.push-2 { 
		padding-left: $base-spacing*2;
		position: relative
	}

	.icon {
		position: absolute;
		display: block;
		height: 1.7em;
		width: 1.7em;
		border-radius: $base-border-radius;
		left: 0; 
		top: -1px;
		background: $light-gray;

	    &.icon-platform-factionbloc {
	      background: url('../images/icon-platform-factionbloc.png') no-repeat;
	      background-size: contain;
	    }
	    &.icon-platform-amazonaws {
	      background: url('../images/icon-platform-amazonaws.png') no-repeat;
	      background-size: contain;
	    }
	    &.icon-platform-vmwareblock {
	      background: url('../images/icon-platform-vmwareblock.png') no-repeat;
	      background-size: contain;
	    }

	    &.icon-billing-pdf {
	      background: url('../images/icon-billing-pdf.png') no-repeat;
	      background-size: contain;
	    }
	}

  	.ticket-unread:after {
	    content: '1';
	    background: $red;
	    color: white;
	    border-radius: $border-radius-round;
	    width: 1.4em;
	    height: 1.4em;
	    display: inline-block;
	    font-size: .7em;
	    text-align: center;
	    position: relative;
	    top: -10px;
	 }
	
	.heading { 
		@include clearfix;
		@include plate-line;
		color: $medium-gray;
	}	

	.details-toggler {

		&.divider {

			[data-details="show"] {

	      		.row:last-child {     			
					border-bottom: 1px solid $base-border-color;
					margin-bottom: -1px;
	      		}		
			}

			&:last-child {

				[data-details="show"] {

		      		.row:last-child {     			
						border-bottom:  1px solid transparent;
		      		}
				}
			}
		}

		.group {
			padding-top: $small-spacing/2;
		}
	}

	.group {
		margin: ($small-spacing / 2) 0;
		padding: $small-spacing $small-spacing 0;
		border-radius: $base-border-radius;

		.value-group {
			@include clearfix;
			margin-bottom: $small-spacing;
			padding-bottom: $small-spacing;
			border-bottom: 1px solid $base-border-color;
		}

		&[data-details="show"] {
			cursor: pointer;
			border: 1px solid transparent;
      		margin: 0;

			&:hover {
				background: $bright-blue;
        		border: 1px solid $bright-blue;
			}			
		}

		&[data-details="edit"] {
			background: $bright-blue;
			border: $base-border;
      		border-color: #D6E1E6;
      		margin: 0 0 $small-spacing;
		}

		&[data-details="show"] {
      		margin: 0 0 $small-spacing;
		}

		& + .details-toggler {
			margin-top: $small-spacing;
		}

		&.info {
			text-align: center;
			@include clearfix;

			ul {
				list-style: disc;
				text-align: left;
				width: 50%;
				margin-left: 50%;
				-webkit-transform: translate-x(-15%);
				transform: translatex(-15%);
				margin-bottom: $small-spacing;
			}
		}
	}

	.row {
		@include clearfix;
		@include plate-line;
		padding-top: $small-spacing/2;
		padding-bottom: $small-spacing;
		position: relative;

		&:last-child { 
			border-bottom: none;
			margin-bottom: 0;
		}

		*:last-child { 
			margin-bottom: 0;
		}

		input:not([type="submit"]),
		select {
			padding: $small-spacing/2;
			width: 100%;

			&.half,
			&.half {
				@include span-columns(6);
				
			}
		}

		.pick-slice {
			select,
			input {	width: 100%; }
		}

		button, 
		.button {
			width: auto;
			@media screen and (max-width: $medium-screen) { margin-top: .5em; }
		}

		.actions-buttons { 
			margin-top: $small-spacing; 
		}

		.actions-link { 
			@include span-columns(4);
			line-height: 2.5; 

			@media screen and (max-width: $medium-screen) { 
				line-height: 1;
				padding-top: $small-spacing;
			}
		}
	}

	.sub { 
		border-bottom: none;
		padding-bottom: 0;
	}


	.step-billing {

	ul,
	.row {
		.span-4 { @include span-columns(4); }
		.span-8 { @include span-columns(8); }
		}
	}

	.ticket {
		border-radius: $base-border-radius;
    margin-right: -1.5em;
    margin-top: -1.5em;
    padding-top: 1.5em;
		@include clearfix;

		.ticket-message {			
			margin-bottom: $base-spacing;
      border-radius: $base-border-radius;
      width: auto;
     
			&.user,
			&.admin {
        clear: both;
			}

      &.admin {
        background: $bright-gray;
      }

      &.user {
        background: $green;
        color: white;
				float: right;	

				.msg-info {
          text-align: right;
          
          time { opacity: .7; }
        } 
			}

      .msg-info {
        font-size: .7em;
        padding: 1em 1em 0;
        
        time { opacity: .4; }
      }

      .msg-text {
        padding: 0.3em 0.75em 0.75em;
      }

			&.image {
				@include span-columns(5);

				.image-placeholder {
					height: 140px;
					width: 100%;
					background: $secondary-background-color;
				}
			}
		}

		.ticket-type {
			@include span-columns(10);
			padding-bottom:  $small-spacing;

			@include media-query($medium-screen) { @include span-columns(9); }

			//&:first-child { padding: 0 $small-spacing; }
		}
	}

	.step-counter { 
		text-align: center;

		.button {

			&.increment { margin-left: $base-spacing; }
			&.decrement { margin-right: $base-spacing; }
		}

		.counter-text { 
			display: inline-block;
			min-width: 30%;
		}
	}

	.step-right {
		text-align: right;
		float: right;
	}

	.ticket-post {
    	background: $bright-blue;
		@include clearfix;
		margin-bottom: $small-spacing;
		padding-top: $base-spacing;
		border-top: 1px solid $base-border-color;
    	margin: 0 -1.5em -1.5em;
    	padding: 0.5em 0.5em 0.5em;
    	height: 57px;

    form {
      position: relative;
    }

    input[type="text"] {
      height: 40px;
      padding-right: 75px;
    }

    .button.small {
      height: 34px;
      position: absolute;
      top: 3px;
      right: 3px;
      border-radius: 2px;
      padding-top: .8em;
    }
	}

	.row-title { 
		@include plate-line;
	}

	.count { 
		float: left;
		display: inline-block;
		padding-right: $small-spacing;
	}

	&.tabbed {
		margin-top: 3.5em;

	    li.settings {
	      	width: 39px;
	      	position: relative;

	      	strong {
	        	text-indent: -999em;
	        	display: block;
      		}

	      	ul { 

	      		@media screen and (min-width: $medium-screen) { 
		      		display: none;
		      		background: white;
		      		position: absolute;
		      		z-index: 10;
		      		right: 0;
		      		margin-top: 3px;
		      		border: 1px solid $base-border-color;
		      		border-radius: 0 0 $base-border-radius $base-border-radius;

		      		li {
		      			display: block; 
		      			border-bottom: 1px solid $base-border-color;

		      			&:last-child { border-bottom: none; }
		      			&.active { 
		      				border: none; 
		      				border-bottom: 1px solid $base-border-color;
		      				background: shade(#F9F7F5, 3);
		      			}
		      		}
	      		}
	      	}

      	&:hover {
      		ul { display: block; }
      	}
    }


    .icon-settings {
      width: 13px;
      background: #F9F7F5;
      height: 13px;
      border-radius: 100px;
      border: 2px solid $dark-gray;
      position: absolute;
      top: 11px;

      &, span {
        &:before {
          content: '';
          width: 3px;
          height: 17px;
          background: $dark-gray;;
          display: block;
          position: absolute;
          top: -4px;
          left: 3px;
        }

        &:after {
          content: '';
          width: 17px;
          height: 3px;
          background: $dark-gray;;
          display: block;
          position: absolute;
          top: 3px;
          left: -4px;
        }
      }

      em {
        border-radius: $border-radius-round;
        background: #F9F7F5;
        width: 9px;
        height: 9px;
        z-index: 2;
        position: absolute;
        left: 0;
      }

      span {
        &:after {
          @include transform(rotate(45deg));
        }
        &:before,
        &:after {
          @include transform(rotate(-45deg));
        }
      }
    }

		.tabs {
			display: block;
			text-align: center;
			margin-top: -3.65em;
			white-space: nowrap;
		    position: relative;
		    bottom: -0.5px;
		    margin-bottom: 1.375em;

			@media screen and (max-width: $medium-screen) { overflow-x: auto; }

			li {
				display: inline-block;
				border: 1px solid transparent;
				border-bottom: none;
				border-radius:  $base-border-radius  $base-border-radius 0 0;  
				padding: .25em $small-spacing;
				cursor: pointer;

				&:hover {
          		background: shade(#F9F7F5, 5);
        }

				&.active { 
          			border: 1px solid $base-border-color;
					border-bottom: 1px solid white;
					cursor: inherit;
					background: $base-background-color;
          			bottom: -1px;
				}
			}
		}
	}
}

.chat .plate {
	.ticket {
		height: calc(100vh - 270px);
		overflow-y: scroll;
		padding-right: $base-spacing;

		@include media($medium-screen) {
      height: calc(100vh - 250px);
    }

	}
}

.products-row {
  clear: both;

  .value,
  .value-type { @include span-columns(4); }

  .value:nth-child(3) {
    @include span-columns(2);
  }

  input[type="text"] {
    max-width: 3em;
    display: inline-block;
    margin-right: .25em;
  }
}
